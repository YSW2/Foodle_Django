{% extends 'base.html' %}

{% block content %}
    <h1>Posts</h1>
    <a href="{% url 'posts:post_add' %}">글쓰기</a>
    <div>
        {% for post in page_obj %}
            <p>
                [ {{ post.tags }} ]
                <a href="{% url 'posts:post_detail' post_id=post.id %}">{{ post.title }}</a>
            </p>
        {% endfor %}
        <br/>
        <br/>
        <ul>
            {% if page_obj.has_other_pages %}
                {% if page_obj.has_previous %}
                    <a style="color: blue;" href="?page={{ page_obj.previous_page_number }}&name={{ request.GET.name }}&keyword={{ request.GET.keyword }}">&#10094; Prev</a>
                {% else %}
                    <span style="color: gray;">&#10094; Prev</span>
                {% endif %}
                {% for page in custom_page_range %}
                    {% if page == page_obj.number %}
                        <a style="color: red;" href="?page={{ page }}&name={{ request.GET.name }}&keyword={{ request.GET.keyword }}">{{ page }}</a>
                    {% else %}
                        <a style="color: blue;" href="?page={{ page }}&name={{ request.GET.name }}&keyword={{ request.GET.keyword }}">{{ page }}</a>
                    {% endif %}
                {% endfor %}
                {% if page_obj.has_next %}
                    <a style="color: blue;" href="?page={{ page_obj.next_page_number }}&name={{ request.GET.name }}&keyword={{ request.GET.keyword }}">Next &#10095;</a>
                {% else %}
                    <span style="color: gray;">Next &#10095;</span>
                {% endif %}
            {% endif %}
        </ul>
    </div>
    <form method="GET" action="{% url 'posts:posts' %}">
        <select name="name">
            <option value="title">제목</option>
            <option value="content">내용</option>
            <option value="title_content">제목+내용</option>
        </select>
        <input type="text" name="keyword" placeholder="검색어 입력" value="{{ request.GET.keyword }}">
        <button type="submit">검색</button>
    </form>
{% endblock %}